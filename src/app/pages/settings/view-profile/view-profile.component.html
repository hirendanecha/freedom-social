<div class="row profile-picture-area justify-content-center mb-15">
  <div class="col-xl-12 col-lg-8">
    <div class="single-box p-5">
      <div class="col-md-12">
        <div class="upload-single cover-img">
          {{ customer?.CoverPicName }}
          <div class="profile-picture position-relative text-start">
            <img
              loading="lazy"
              data-src="{{
                customer?.CoverPicName || '/assets/images/profile-cover.png'
              }}"
              class="preview-image w-100"
              onerror="this.onerror=null;this.src='/assets/images/profile-cover.png';"
              alt="Preview Image"
            />
          </div>
        </div>
        <div class="row mt-5">
          <div class="col-md-4 profile text-start d-flex align-items-center">
            <img
              class="preview-image w-120-px h-120-px"
              loading="lazy"
              data-src="{{
                customer?.ProfilePicName ||
                  '/assets/images/avtar/placeholder-user.png'
              }}"
              onerror="this.onerror=null;this.src='/assets/images/avtar/placeholder-user.png';"
              alt="Preview Image"
            />
            <div class="user-details ms-3">
              <h3>{{ customer?.FirstName }} {{ customer?.LastName }}</h3>
              <h5 class="d-flex">
                {{ customer?.Username }}
              </h5>
            </div>
          </div>
          <div class="col-md">
            <button
              class="btn btn-sm btn-primary float-end"
              (click)="openEditProfile()"
            >
              Edit Profile
            </button>
          </div>
        </div>
        <div class="row mt-8">
          <div class="page-details">
            <ul class="nav pt-3 flex-wrap tab-area">
              <li class="nav-item" role="presentation" (click)="activeTab = 1">
                <a
                  class="nav-link d-center"
                  [ngClass]="activeTab === 1 ? 'active' : ''"
                  >Posts</a
                >
              </li>
              <li
                class="nav-item"
                role="presentation"
                (click)="activeTab = 2; getCommunities()"
              >
                <a
                  class="nav-link d-center"
                  [ngClass]="activeTab === 2 ? 'active' : ''"
                  >Communities</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="d-lg-flex d-block w-100 gap-5 min-vh-100">
      <div
        class="flex-column mb-15 w-100"
      >
        <ng-container *ngIf="activeTab === 1">
          <app-post-list parentComponent="ViewProfileComponent" />
        </ng-container>
        <ng-container *ngIf="activeTab === 2">
          <ng-container *ngIf="communityList.length; else noData">
            <div class="row">
              <div
                class="col-xl-4 col-sm-6"
                *ngFor="let community of communityList"
              >
                <div class="single-box p-5">
                  <div class="avatar-box position-relative">
                    <img
                      class="w-100 h-180-px rounded-3"
                      loading="lazy"
                      data-src="{{ community.coverImg }}"
                      alt="avatar"
                    />
                    <div
                      class="abs-area w-100 position-absolute top-0 p-3 d-center justify-content-end"
                    >
                      <div class="btn-group cus-dropdown dropend">
                        <div class="btn-group cus-dropdown">
                          <button
                            type="button"
                            class="dropdown-btn"
                            (click)="openDropDown(community.id)"
                          >
                            <i class="material-symbols-outlined fs-xxl m-0">
                              more_horiz
                            </i>
                          </button>
                          <ul
                            class="dropdown-menu p-4 pt-2 mt-6"
                            [ngClass]="
                              communityId === community.id ? 'show' : ''
                            "
                            (mouseleave)="communityId = null"
                          >
                            <li>
                              <a
                                class="droplist d-flex align-items-center gap-2"
                                (click)="communityId = null"
                              >
                                <i class="material-symbols-outlined mat-icon">
                                  edit
                                </i>
                                <span>Edit</span>
                              </a>
                            </li>
                            <li>
                              <a
                                class="droplist d-flex align-items-center gap-2"
                                (click)="communityId = null"
                              >
                                <i class="material-symbols-outlined mat-icon">
                                  delete
                                </i>
                                <span>Delete</span>
                              </a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="abs-avatar-item">
                    <img
                      class="w-48-px h-48-px m-3 rounded-3"
                      loading="lazy"
                      data-src="{{ community.logoImg }}"
                      alt="avatar"
                    />
                  </div>
                  <a
                    ><h6 class="m-0 mb-2 mt-3">
                      {{ community.CommunityName }}
                    </h6></a
                  >
                  <p class="smtxt public-group">
                    {{ community.CommunityDescription }}
                  </p>
                  <div class="friends-list d-center mt-3 gap-1 text-center">
                    <span class="smtxt m-0"
                      >{{ community.members }} Member</span
                    >
                  </div>
                  <div class="d-center btn-border pt-5 gap-2 mt-4">
                    <button
                      class="cmn-btn p-2 alt third"
                      (click)="goToCommunityDetails(community)"
                    >
                      View
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
          <ng-template #noData>
            <div>
              <h3 class="text-center">No Communities</h3>
            </div>
          </ng-template>
        </ng-container>
      </div>

      <div class="my-list-sidebar">
        <app-my-list></app-my-list>
      </div>
    </div>
  </div>
</div>
