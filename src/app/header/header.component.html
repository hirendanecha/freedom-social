<header class="header-section header-menu">
  <nav class="navbar navbar-expand-lg p-0">
    <div class="container">
      <nav class="navbar w-100 navbar-expand-lg justify-content-between">
        <div class="d-flex align-items-center">
          <a routerLink="/home" class="navbar-brand">
            <img src="assets/images/icon.jpg" class="logo" alt="logo" />
          </a>

          <button class="button search-active d-none">
            <i class="d-center material-symbols-outlined fs-xxl mat-icon">
              search
            </i>
          </button>

          <div class="input-area d-md-flex d-none align-items-center">
            <i class="material-symbols-outlined mat-icon me-1">search</i>
            <input
              type="text"
              name="search"
              placeholder="Search"
              [(ngModel)]="searchText"
              autocomplete="off"
              (keyup)="getUserList()"
            />
          </div>

          <!-- <ng-container *ngIf="searchText">
            <div class="search-user-list position-absolute">
              <div class="row">
                <div
                  class="user-details d-flex pb-2 pt-2 justify-content-start align-items-center"
                  *ngFor="let user of userList"
                >
                  <div class="me-5" *ngIf="user">
                    <img
                      class="profile-pic"
                      [src]="user.ProfilePicName"
                      alt=""
                      onerror="this.onerror=null;this.src='/assets/images/avtar/placeholder-user.png';"
                    />
                  </div>
                  <span class="" (click)="openProfile(user.Id)">
                    {{ user.Username }}
                  </span>
                </div>
              </div>
            </div>
          </ng-container> -->
          <ng-container *ngIf="searchText">
            <div #userSearchDropdownRef ngbDropdown>
              <div ngbDropdownMenu class="search-user-list">
                <ng-container *ngFor="let user of userList">
                  <div
                    ngbDropdownItem
                    class="d-flex gap-3 pe-auto"
                    role="button"
                    (click)="openProfile(user.Id)"
                  >
                    <img
                      class="w-32-px h-32-px rounded"
                      [src]="user.ProfilePicName"
                      [alt]="user.Username"
                      onerror="this.onerror=null;this.src='/assets/images/avtar/placeholder-user.png';"
                    />
                    <span>{{ user.Username }}</span>
                  </div>
                </ng-container>
              </div>
            </div>
          </ng-container>
        </div>

        <ul
          class="navbar-nav feed flex-row gap-xl-20 gap-lg-10 gap-sm-7 gap-1 py-4 py-lg-0 m-lg-auto ms-auto ms-aut align-self-center"
        >
          <li>
            <a
              routerLink="/"
              class="nav-icon home active"
              data-toggle="tooltip"
              data-placement="bottom"
              title="Home"
              ><i class="mat-icon fs-xxl material-symbols-outlined mat-icon"
                >home</i
              ></a
            >
          </li>
          <li>
            <!-- routerLink="/favorite" -->
            <a
              routerLink="/research"
              class="nav-icon research"
              data-toggle="tooltip"
              data-placement="bottom"
              title="Research"
              ><i class="mat-icon fs-xxl material-symbols-outlined mat-icon"
                >feed</i
              ></a
            >
          </li>
          <!-- <li>
            <a routerLink="/people/all-friends" class="nav-icon"
              ><i class="mat-icon fs-xxl material-symbols-outlined mat-icon"
                >group</i
              ></a
            >
          </li> -->
          <li>
            <a
              href="https://freedom.social/cmpgm/daily"
              target="_blank"
              class="nav-icon"
              data-toggle="tooltip"
              data-placement="bottom"
              title="FreedomTube"
              ><i class="mat-icon fs-xxl material-symbols-outlined mat-icon"
                >smart_display</i
              ></a
            >
          </li>
          <!-- <li>
            <a routerLink="/login" class="nav-icon"
              ><i class="mat-icon fs-xxl material-symbols-outlined mat-icon"
                >login
                </i
              ></a
            >
          </li>
          <li>
            <a routerLink="/register" class="nav-icon"
              ><i class="mat-icon fs-xxl material-symbols-outlined mat-icon"
                >how_to_reg
                </i
              ></a
            >
          </li> -->
        </ul>

        <div
          class="right-area position-relative justify-content-end gap-3 gap-xxl-6 align-items-center w-25 d-none d-lg-flex"
        >
          <div class="single-item d-none d-lg-block messages-area">
            <div class="messages-btn cmn-head">
              <div
                class="icon-area d-center position-relative"
                data-toggle="tooltip"
                data-placement="bottom"
                title="Comming soon"
              >
                <i class="material-symbols-outlined mat-icon">mail</i>
                <!-- (click)="openMessageList()" -->
              </div>
            </div>
          </div>
          <div
            class="single-item d-none d-lg-block messages-area notification-area"
          >
            <div class="notification-btn cmn-head position-relative">
              <div class="icon-area d-center position-relative">
                <span
                  *ngIf="sharedService.isNotify"
                  class="abs-area position-absolute d-center smtxt"
                ></span>
                <i
                  class="material-symbols-outlined mat-icon"
                  (click)="openNotificationList()"
                  >notifications</i
                >
              </div>
            </div>
          </div>
          <div class="single-item d-none d-lg-block position-relative">
            <!-- profile-area -->
            <div class="profile-pic d-flex align-items-center">
              <span class="avatar cmn-head active-status">
                <img
                  class="avatar-img max-un"
                  [src]="sharedService.profilePic"
                  onerror="this.onerror=null;this.src='/assets/images/avtar/placeholder-user.png';"
                  alt="avatar"
                  id="userMenuList"
                  (click)="openUserMenu()"
                />
              </span>
            </div>
          </div>
        </div>
      </nav>
    </div>
  </nav>
</header>

<ng-template #userMenuList>
  <div class="main-area p-5 profile-content">
    <div class="head-area">
      <div class="d-flex gap-3">
        <div class="avatar-item">
          <img
            class="avatar-img max-un"
            [src]="sharedService.profilePic"
            onerror="this.onerror=null;this.src='/assets/images/avtar/placeholder-user.png';"
            alt="avatar"
          />
        </div>
        <div class="text-area">
          <h6 class="m-0 mb-1">{{ sharedService?.userData?.Username }}</h6>
          <p class="mdtxt">Web Developer</p>
        </div>
      </div>
    </div>
    <div class="view-profile my-2">
      <a
        class="mdtxt w-100 text-center py-2"
        (click)="closeMenu($event, 'profile')"
        >View profile</a
      >
    </div>
    <ul class="ps-0">
      <li>
        <a class="mdtxt" (click)="closeMenu($event, 'setting')">
          <i class="material-symbols-outlined mat-icon"> settings </i>
          setting & privacy
        </a>
      </li>
      <li>
        <a class="mdtxt" (click)="closeMenu($event, 'logout')">
          <i class="material-symbols-outlined mat-icon"> power_settings_new </i>
          Sign Out
        </a>
      </li>
      <li>
        <a class="mdtxt" (click)="closeMenu($event, 'change-password')">
          <i class="material-symbols-outlined mat-icon"> lock_reset </i>
          Change Password
        </a>
      </li>
    </ul>
    <div
      class="switch-wrapper mt-4 d-flex gap-1 align-items-center"
      (click)="closeMenu($event, '')"
    >
      <i
        class="mat-icon material-symbols-outlined sun icon"
        [ngClass]="!isDark ? 'active' : ''"
      >
        light_mode
      </i>

      <div class="form-check form-switch">
        <input
          class="form-check-input"
          type="checkbox"
          role="switch"
          [checked]="sharedService.isDark"
          (change)="sharedService.toggleUi()"
        />
      </div>

      <i
        class="mat-icon material-symbols-outlined moon icon"
        [ngClass]="isDark ? 'active' : ''"
      >
        dark_mode
      </i>
      <span class="mdtxt ms-2">Mode</span>
    </div>
  </div>
</ng-template>

<ng-template #notificationList>
  <div class="main-area p-5 notification-content">
    <h5 class="mb-8">Notification</h5>
    <ng-container *ngFor="let notification of sharedService.notificationList">
      <div class="single-box p-0 mb-7" *ngIf="notification.isRead === 'N'">
        <a
          class="d-flex justify-content-between align-items-center"
          (click)="
            readUnreadNotification(notification.id, 'Y');
            viewUserProfile(notification.notificationByProfileId)
          "
        >
          <div class="left-item position-relative d-inline-flex gap-3">
            <div class="avatar position-relative d-inline-flex">
              <img
                class="avatar-img w-52-px h-52-px rounded-5"
                [src]="notification?.ProfilePicName"
                alt="avatar"
              />
              <!-- <img
                class="abs-item position-absolute max-un"
                src="assets/images/icon/speech-bubble.png"
                alt="icon"
              /> -->
            </div>
            <div class="text-area">
              <h6 class="m-0 mb-1">
                {{ notification?.FirstName }}
                <span
                  *ngIf="notification.isRead === 'N'"
                  class="unread-notification smtxt"
                ></span>
              </h6>
              <p class="mdtxt">{{ notification?.notificationDesc }}</p>
            </div>
          </div>
          <!-- <div class="time-remaining">
            <p class="mdtxt">Just now</p>
          </div> -->
        </a>
      </div>
    </ng-container>
    <div
      class="btn-area"
      *ngIf="sharedService.notificationList.length > 0"
      (click)="userMenusOverlayDialog.close()"
    >
      <a routerLink="/notifications">See all notification</a>
    </div>
  </div>
</ng-template>

<ng-template #messageList>
  <div class="main-area p-5 messages-content">
    <h5 class="mb-8">Messages</h5>
    <div class="single-box p-0 mb-7">
      <a routerLink="/" class="d-flex gap-2 align-items-center">
        <div class="avatar">
          <img
            class="avatar-img max-un"
            src="assets/images/avatar-7.png"
            alt="avatar"
          />
        </div>
        <div class="text-area">
          <div
            class="title-area position-relative d-inline-flex align-items-center"
          >
            <h6 class="m-0 d-inline-flex">Piter Maio</h6>
            <span class="abs-area position-absolute d-center mdtxt">1</span>
          </div>
          <p class="mdtxt sms">Amet minim mollit non....</p>
        </div>
      </a>
    </div>
    <div class="single-box p-0 mb-7">
      <a routerLink="/" class="d-flex gap-2 align-items-center">
        <div class="avatar">
          <img
            class="avatar-img max-un"
            src="assets/images/avtar/avatar.png"
            alt="avatar"
          />
        </div>
        <div class="text-area">
          <h6 class="m-0 mb-1">Annette Black</h6>
          <p class="mdtxt">You: consequat sunt</p>
        </div>
      </a>
    </div>
    <div class="single-box p-0 mb-7">
      <a routerLink="/" class="d-flex gap-2 align-items-center">
        <div class="avatar">
          <img
            class="avatar-img max-un"
            src="assets/images/avatar-2.png"
            alt="avatar"
          />
        </div>
        <div class="text-area">
          <h6 class="m-0 mb-1">Ralph Edwards</h6>
          <p class="mdtxt sms">Amet minim mollit non....</p>
        </div>
      </a>
    </div>
    <div class="single-box p-0 mb-7">
      <a class="d-flex gap-2 align-items-center">
        <div class="avatar">
          <img
            class="avatar-img max-un"
            src="assets/images/avatar-6.png"
            alt="avatar"
          />
        </div>
        <div class="text-area">
          <h6 class="m-0 mb-1">Jacob Jones</h6>
          <p class="mdtxt">You: consequat sunt</p>
        </div>
      </a>
    </div>
    <div class="btn-area">
      <a>See all inbox</a>
    </div>
  </div>
</ng-template>
